<!DOCTYPE html>
<html ng-app="carringtonCalc">
<head lang="en" >
    <meta charset="UTF-8">
    <title>Carrington Calculator!</title>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <style>
        .col-centered {
            float: none;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<div class="container">
    <div ng-controller="CalcCtrl" class="col-md-6 col-md-offset-3">
        <h1>Carrington Calculator 2.0</h1>
        <div class="form-group">
            <input type="text"
                      ng-model="rotations"
                      ng-change="carrington2date()"
                      placeholder="Number of Carrington Rotations"
                      min="0"
                      required>
        </div>
        <div class="form-group">
            <input type="date"
                    ng-model="dateString"
                    ng-change="date2carrington()"
                    placeholder="Date String"
                    required>
        </div>
        <h1>ROTATIONS: {{rotations}}</h1>
        <h1>DATE: {{dateString | date: 'MM-dd-yyyy' }}</h1>
    </div>
</div>
</body>

<script>
    var app = angular.module('carringtonCalc', []);
    app.controller('CalcCtrl',['$scope', function($scope) {
        var crDays = 27.2753;
        $scope.rotations = 0;
        $scope.dateString = new Date("October 14, 1853");;

        $scope.carrington2date = function() {
            var days = crDays * $scope.rotations;
            var startDate = new Date("October 14, 1853");
            $scope.dateString = new Date(startDate.setUTCDate(startDate.getUTCDate() + days));

        };

        $scope.date2carrington = function(){
            var startingDate = new Date("October 14, 1853");
            var date = $scope.dateString;
            var days = (date.getTime() - startingDate.getTime()) / 1000 / 60 / 60 / 24;
            var crNum = days / crDays;
            $scope.rotations = crNum;
        };
    }]);
</script>

</body>
</html>